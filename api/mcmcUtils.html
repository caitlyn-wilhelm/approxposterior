

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MCMC Utility Functions &mdash; approxposterior 0.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Likelihood Functions" href="likelihood.html" />
    <link rel="prev" title="GP Utility Functions" href="gpUtils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> approxposterior
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Approximate Bayesian Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bayesopt.html">Bayesian Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../map.html">MAP Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/fittingALine.html">Fitting a Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/ScalingAccuracy.html">Scaling and Accuracy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="approx.html">approx.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmmUtils.html">gmmUtils.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpUtils.html">gpUtils.py</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mcmcUtils.py</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mcmcutils-py-markov-chain-monte-carlo-utility-functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mcmcUtils.py</span></code> - Markov Chain Monte Carlo Utility Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="likelihood.html">likelihood.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="utility.html">utility.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dflemin3/approxposterior">Github</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dflemin3/approxposterior/issues">Submit an Issue</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">approxposterior</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">API</a> &raquo;</li>
        
      <li>MCMC Utility Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/mcmcUtils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-approxposterior.mcmcUtils">
<span id="mcmc-utility-functions"></span><h1>MCMC Utility Functions<a class="headerlink" href="#module-approxposterior.mcmcUtils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="mcmcutils-py-markov-chain-monte-carlo-utility-functions">
<h2><code class="xref py py-mod docutils literal notranslate"><span class="pre">mcmcUtils.py</span></code> - Markov Chain Monte Carlo Utility Functions<a class="headerlink" href="#mcmcutils-py-markov-chain-monte-carlo-utility-functions" title="Permalink to this headline">¶</a></h2>
<p>MCMC utility functions for validating emcee MCMC runs within approxposterior.</p>
<dl class="function">
<dt id="approxposterior.mcmcUtils.validateMCMCKwargs">
<code class="sig-prename descclassname">approxposterior.mcmcUtils.</code><code class="sig-name descname">validateMCMCKwargs</code><span class="sig-paren">(</span><em class="sig-param">ap</em>, <em class="sig-param">samplerKwargs</em>, <em class="sig-param">mcmcKwargs</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxposterior/mcmcUtils.html#validateMCMCKwargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxposterior.mcmcUtils.validateMCMCKwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates emcee.EnsembleSampler parameters/kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ap</strong> (<em>approxposterior.ApproxPosterior</em>) – Initialized ApproxPosterior object</p></li>
<li><p><strong>samplerKwargs</strong> (<em>dict</em>) – dictionary containing parameters intended for emcee.EnsembleSampler
object</p></li>
<li><p><strong>mcmcKwargs</strong> (<em>dict</em>) – dictionary containing parameters intended for
emcee.EnsembleSampler.run_mcmc/.sample object</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – verboisty level. Defaults to False (no output)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>samplerKwargs</strong> (<em>dict</em>) – Sanitized dictionary containing parameters intended for
emcee.EnsembleSampler object</p></li>
<li><p><strong>mcmcKwargs</strong> (<em>dict</em>) – Sanitized dictionary containing parameters intended for
emcee.EnsembleSampler.run_mcmc/.sample object</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="approxposterior.mcmcUtils.batchMeansMCSE">
<code class="sig-prename descclassname">approxposterior.mcmcUtils.</code><code class="sig-name descname">batchMeansMCSE</code><span class="sig-paren">(</span><em class="sig-param">samples</em>, <em class="sig-param">bins=None</em>, <em class="sig-param">fn=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxposterior/mcmcUtils.html#batchMeansMCSE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxposterior.mcmcUtils.batchMeansMCSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the Monte Carlo Standard Error of MCMC samples using the
non-overlapping batch means methods. See Flegal, Haran, &amp; Jones (2008) for
more info: <a class="reference external" href="https://arxiv.org/pdf/math/0703746.pdf">https://arxiv.org/pdf/math/0703746.pdf</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>samples</strong> (<em>array</em>) – nsamples x ndim array of MCMC samples</p></li>
<li><p><strong>bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of bins. Defaults to int(sqrt(len(samples)))</p></li>
<li><p><strong>fn</strong> (<em>function</em><em>, </em><em>optional</em>) – Function used to compute posterior summary statistic on each chunk.
Defaults to None to compute the simple expected value, aka the mean.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>RMSE</strong> – RMSE for each dimension of the chain</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float/array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="approxposterior.mcmcUtils.estimateBurnin">
<code class="sig-prename descclassname">approxposterior.mcmcUtils.</code><code class="sig-name descname">estimateBurnin</code><span class="sig-paren">(</span><em class="sig-param">sampler</em>, <em class="sig-param">estBurnin=True</em>, <em class="sig-param">thinChains=True</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxposterior/mcmcUtils.html#estimateBurnin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxposterior.mcmcUtils.estimateBurnin" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the integrated autocorrelation length on the MCMC chain associated
with an emcee sampler object. With the integrated autocorrelation length,
we can then estimate the burn-in length for the MCMC chain. This procedure
follows the example outlined here:
<a class="reference external" href="https://emcee.readthedocs.io/en/stable/tutorials/autocorr/">https://emcee.readthedocs.io/en/stable/tutorials/autocorr/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampler</strong> (<em>emcee.EnsembleSampler</em>) – emcee MCMC sampler object/backend handler, given a complete chain</p></li>
<li><p><strong>estBurnin</strong> (<em>bool</em><em>, </em><em>optional</em>) – Estimate burn-in time using integrated autocorrelation time
heuristic.  Defaults to True. In general, we recommend users
inspect the chains and calculate the burnin after the fact to ensure
convergence, but this function works pretty well.</p></li>
<li><p><strong>thinChains</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether or not to thin chains.  Useful if running long chains.
Defaults to True.  If true, estimates a thin cadence
via int(0.5*np.min(tau)) where tau is the intergrated autocorrelation
time.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Output all the diagnostics? Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>iburn</strong> (<em>int</em>) – burn-in index estimate.  If estBurnin == False, returns 0.</p></li>
<li><p><strong>ithin</strong> (<em>int</em>) – thin cadence estimate.  If thinChains == False, returns 1.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="likelihood.html" class="btn btn-neutral float-right" title="Likelihood Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gpUtils.html" class="btn btn-neutral float-left" title="GP Utility Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, David P. Fleming

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>